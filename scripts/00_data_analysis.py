# coding: utf-8
import matplotlib.pyplot as plt

# 定义数据
data = '''
0.47%	在线百科全书
0.37%	同人小说社区
0.26%	文学（成人）
0.18%	新闻与时事
0.16%	国际新闻媒体
0.15%	文学（成人）
0.14%	编程问答社区
0.13%	家庭与育儿论坛
0.12%	流行文化与叙事分析
0.12%	同人创作平台
0.11%	财经与时事评论
0.10%	电子书与文档
0.10%	新闻与观点杂志
0.10%	技术新闻与讨论
0.10%	在线文档与书籍共享
0.10%	新闻文本记录
0.09%	国际新闻媒体
0.09%	数字化存档平台
0.09%	美食与烹饪讨论
0.09%	社区知识库
0.09%	商业与金融新闻
0.09%	社区讨论平台
0.09%	电子书存档
0.08%	DIY教程与创意分享
0.08%	科学与医学期刊
0.08%	文学（成人）
0.08%	新闻与博客平台
0.07%	游戏攻略与讨论
0.07%	公共领域文献
0.07%	国际新闻媒体
0.07%	开放获取科学期刊
0.07%	国际新闻与评论
0.07%	数字化存档平台
0.07%	社区创作与内容分享
0.07%	公共广播服务
0.06%	知识问答与参考
0.06%	新闻与文化评论
0.06%	实用教程平台
0.06%	法律文献与案例
0.06%	游戏与娱乐评论
0.06%	原创小说平台
0.06%	免费电子书
0.06%	商业与财经新闻
0.06%	国际新闻媒体
0.06%	技术新闻
0.06%	政治新闻博客
0.06%	在线百科全书（移动版）
0.06%	国际新闻媒体
0.06%	科学与数学论坛
0.06%	宗教与哲学文本
0.06%	文学与艺术平台
0.06%	投资与理财建议
0.06%	公共广播与新闻
0.05%	国际新闻与分析
0.05%	宗教与哲学文本
0.05%	数字化文献库
0.05%	体育新闻与分析
0.05%	硬件开发与创意技术
0.05%	编程问题与解答
0.05%	演讲与创意分享
0.05%	学术资源与解答
0.05%	国际法与案例
0.05%	国际新闻与评论
0.05%	数学问答与讨论
0.05%	消费者资讯与建议
0.05%	新闻与评论
0.05%	新闻与评论
0.05%	财经与时事评论
0.05%	地区新闻与生活方式
0.05%	博客与评论平台
0.05%	职场建议与问题
0.04%	学术论文资源
0.04%	医学研究文献
0.04%	幽默与讽刺百科
0.04%	问答与社区讨论
0.04%	IT专业问答平台
0.04%	幻灯片与文档分享
0.04%	纪录片资源
0.04%	技术支持与问答
0.04%	文学与新闻评论
0.04%	新闻与评论
0.04%	宗教与神学资源
0.04%	数学问答与讨论
0.04%	政治与新闻评论
0.04%	国际新闻媒体
0.04%	国际新闻与评论
0.04%	技术与产品评测
0.04%	游戏新闻与讨论
0.04%	枪支与安全评论
0.04%	技术与产品评测
0.04%	技术新闻与分析
0.04%	新闻与评论
0.04%	技术与流行文化
0.04%	俚语与词汇解释
0.04%	在线百科全书
0.04%	文档与表格资源
0.04%	在线百科全书
0.04%	娱乐与幽默文章
0.04%	宗教与文化讨论
0.04%	技术新闻与评论
0.04%	学习与记忆工具
0.04%	存档网站（可能已失效）
0.04%	小说创作与阅读平台
0.04%	新闻与博客平台（英国）
0.03%	商业与创业资源
0.03%	小说与同人作品平台
0.03%	新闻与评论杂志
0.03%	免费电子书资源
0.03%	Stack
0.03%	生物与医学文献数据库
0.03%	影视剧字幕与文本
0.03%	开放学习书籍平台
0.03%	网络权利与隐私新闻
0.03%	小说与创作社区
0.03%	《哈利·波特》同人小说平台
0.03%	科学与学术出版平台
0.03%	投资与金融教育
0.03%	科学新闻与讨论
0.03%	消费者评论与建议
0.03%	技术与商业新闻
0.03%	历史与哲学文献
0.03%	物理学问答社区
0.03%	博客与评论平台
0.03%	在线文章与内容分享
0.03%	文化与女性评论
0.03%	角色扮演社区
0.03%	旧网络文件存档
0.03%	新闻与时事评论
0.03%	心理学知识库
0.03%	新闻与自由主义评论
0.03%	投资与市场分析
0.03%	科学博客平台
0.03%	在线书店
0.03%	创业与商业资源
0.03%	网站托管与博客平台
0.03%	新闻与文化评论
0.03%	游戏新闻与评论
0.03%	保守主义百科
0.03%	技术与创业新闻讨论
0.03%	调查新闻与评论
0.03%	基因组学研究期刊
0.03%	引言与语录平台
0.03%	新闻与时事评论
0.03%	音乐与文化评论
0.03%	免费电子书资源
0.03%	在线百科全书
0.03%	电影与电视评论
0.03%	美式足球分析
0.03%	英语问答社区
0.03%	新闻与文化评论
0.03%	技术与文化新闻
0.03%	学术与学习资源
0.03%	政治与社会评论
0.03%	学习与记忆资源
0.03%	澳大利亚新闻
0.03%	科技新闻与讨论
0.03%	创意与科技博客
0.03%	苹果产品论坛
0.03%	体育新闻与分析
0.03%	桌游与角色扮演问答社区
0.03%	新闻与博客平台
0.03%	流行文化与新闻评论
0.03%	Ubuntu
0.03%	在线学习与课程平台
0.03%	体育新闻与评论
0.03%	实用技巧与建议
0.03%	问答与社区讨论
0.03%	微博客与社交平台
0.03%	网络标准与讨论
0.03%	阴谋与讨论平台
0.03%	数字出版与共享平台
0.03%	技术新闻与分析
0.03%	新闻与教育资源
0.03%	新闻与文化评论
0.03%	《星球大战》粉丝百科
0.02%	桌游与角色扮演资源
0.02%	艺术档案资源
0.02%	音乐与贝斯论坛
0.02%	国际法与案例资源
0.02%	游戏新闻与评论
0.02%	新闻与文化评论
0.02%	娱乐与流行文化评论
0.02%	新闻与文化评论
0.02%	技术新闻与评测
0.02%	马克思主义文献库
0.02%	新西兰新闻
0.02%	Perl
0.02%	知识与百科平台
0.02%	苹果产品新闻与技巧
0.02%	幻灯片分享平台
0.02%	影视评论与评测
0.02%	学术资源与学习帮助
0.02%	小说创作与阅读平台
0.02%	书籍评论与文化讨论
0.02%	财经新闻与分析
0.02%	心理学新闻与观点
0.02%	金融交易社区
0.02%	科幻与奇幻文学平台
0.02%	军事讨论社区
0.02%	新闻与文化评论
0.02%	技术与产品评测
0.02%	新闻与地方报道
0.02%	信息管理与资源
0.02%	科幻与流行文化新闻
0.02%	硬件新闻与评论
0.02%	网络安全问答社区
0.02%	澳大利亚新闻
0.02%	新闻与本地事件
0.02%	网站构建与资源平台
0.02%	博客与小说创作
0.02%	科学新闻与分析
0.02%	犹太家谱研究
0.02%	新闻与时事报道
0.02%	财经与市场新闻
0.02%	汽车论坛与讨论
0.02%	操作系统与技术新闻
0.02%	新闻与文化评论
0.02%	游戏问答社区
0.02%	新闻与时事评论
0.02%	在线演示与幻灯片工具
0.02%	新闻与流行文化评论
0.02%	加拿大新闻与节目
0.02%	学术与学习资源
0.02%	生活与文化新闻
0.02%	政治与社会评论
0.02%	摄影博客
0.02%	社区分享与故事平台
0.02%	无神论讨论社区
0.02%	电视节目数据库
0.02%	汽车新闻与评论
0.02%	内容分发平台
0.02%	时尚与生活杂志
0.02%	趣味列表与内容平台
0.02%	技术与流行文化新闻
0.02%	地方新闻与评论
0.02%	内容创作与分享
0.02%	科学与技术新闻
0.02%	白宫历史档案
0.02%	华尔街日报博客
0.02%	医学与生物学期刊
0.02%	免费电子书资源
0.02%	科学博客
0.02%	用户体验问答社区
0.02%	创新与商业新闻
0.02%	科幻与科技新闻
0.02%	新闻与教育资源
0.02%	技术新闻与讨论
0.02%	编程社区元讨论
0.02%	软件开发与编程资源
0.02%	伊斯兰宗教与文化资源
0.02%	在线百科全书
0.02%	电脑与技术评测
0.02%	在线辩论与讨论平台
0.02%	文学与经典作品
0.02%	个人理财与生活技巧
0.02%	学术与社会对话平台
0.02%	政治与社会评论
0.02%	电影与电视数据库
0.02%	编程与开发资源
0.02%	技术问答社区
0.02%	新闻与时事报道
0.02%	游戏新闻与评论
0.02%	美国文学资源
0.02%	技术与软件开发新闻
0.02%	气候科学博客
0.02%	健康问答社区
0.02%	新闻与地方报道
0.02%	科学新闻发布平台
0.02%	软件开发与协作平台
0.02%	免费图书馆资源
0.02%	开放教育资源
0.02%	游戏新闻与评论
0.02%	学习工具与记忆资源
0.02%	青少年创作与写作社区
0.02%	游戏新闻与讨论
0.02%	摄影问答社区
0.02%	生物信息学期刊
0.02%	Linux
0.02%	Unix
0.02%	政治与文化评论
0.02%	科技新闻论坛
0.02%	娱乐与游戏评分
0.02%	娱乐新闻与评论
0.02%	音乐评论与新闻
0.02%	新闻与分析
0.02%	游戏开发问答社区
0.02%	音频播放器软件资源
0.02%	技术与商业资源
0.02%	美容与医疗评论
0.02%	工人自治与社会资源
0.02%	新闻与以色列社会评论
0.02%	电影与DVD评论
0.02%	气候变化评论
0.02%	在线课程与学习平台
0.02%	新闻与博客平台（加拿大）
0.02%	游戏攻略与秘籍
0.02%	经济与社会博客
0.02%	网络标准与技术资源
0.02%	法律与商业资源
0.02%	技术与数字权利评论
0.02%	圣经研究与宗教资源
0.02%	任天堂游戏新闻与评论
0.02%	美国历史与文化
0.02%	科学与自然期刊
0.02%	时尚与生活方式杂志
0.02%	社区论坛与娱乐新闻
0.02%	新闻门户与在线服务
0.02%	国际新闻与广播
0.02%	财经新闻与市场分析
0.02%	在线虚拟宠物游戏
0.02%	同人小说与创作社区
0.02%	本地新闻与评论
0.02%	宝可梦对战策略社区
0.02%	思想与创新平台
0.02%	世界观构建问答社区
0.02%	在线公共资源与档案
0.02%	南非科学期刊
0.02%	法律案例与资源
0.02%	文学与参考书资源
0.02%	颜色信息与工具
0.02%	历史新闻与分析
0.02%	学术资源与文学分析
0.02%	视觉化百科资源
0.02%	自闭症与健康资源
0.02%	动漫新闻与评论
0.02%	基督教问答社区
0.02%	巴西科学期刊
0.02%	教育与知识资源
0.02%	同人小说社区
0.02%	简明知识与教育资源
0.02%	基督教经典电子图书
0.02%	科技与DIY资源
0.02%	游戏新闻与评论
0.02%	宗教与哲学资源
0.02%	国际新闻与评论
0.02%	Stack
0.02%	科学与科幻博客
0.02%	体育新闻与评论
0.02%	英国财经与国际新闻
0.02%	免费电子书资源
0.02%	科技产品新闻与评论
0.02%	无神论者社区
0.02%	学术写作与论文资源
0.02%	简明版维基百科
0.02%	Oracle
0.02%	常见问题解答资源
0.02%	漫画新闻与评论
0.02%	音响与音频论坛
0.02%	政治与文化评论
0.02%	游戏秘籍与攻略
0.02%	小说在线阅读
0.02%	武侠小说翻译社区
0.02%	网络安全博客
0.02%	在线交友平台
0.02%	工作场所问答社区
0.02%	论坛与讨论平台
0.02%	奇幻文学资源
0.02%	犹太教问答社区
0.02%	政治与广播评论
0.02%	烹饪问答社区
0.02%	Apple
0.02%	知识与趣闻网站
0.02%	司法与法律博客
0.02%	搜索与索引平台
0.02%	音乐与文化新闻
0.02%	学术与文学资源
0.02%	社会主义与新闻评论
0.02%	独立电子书出版平台
0.02%	财经新闻与市场分析
0.02%	生活与娱乐新闻
0.02%	健康与医疗论坛
0.02%	加拿大新闻与评论
0.02%	宗教与神学博客
0.01%	新闻与文化评论
0.01%	游戏与娱乐博客
0.01%	PC
0.01%	基因组生物学期刊
0.01%	国际新闻与商业分析
0.01%	DIY
0.01%	国际关系与政策资源
0.01%	社会与新闻评论
0.01%	美国国防部资源
0.01%	园艺与草坪论坛
0.01%	开放教材资源
0.01%	理性主义与评论资源
0.01%	倒计时与工具资源
0.01%	英国新闻与评论
0.01%	高保真音响评论
0.01%	教育与政策博客
0.01%	Windows
0.01%	新西兰新闻与评论
0.01%	新闻与文化评论
0.01%	创造论与科学资源
0.01%	在线文档与资源
0.01%	问答社区
0.01%	政治与评论博客
0.01%	科学与技术新闻
0.01%	啤酒评论与资源
0.01%	奥地利经济学资源
0.01%	专家问答平台
0.01%	新闻与评论，专注于社会正义和环保
0.01%	本地新闻，主要覆盖休斯顿地区
0.01%	印度新闻与娱乐门户
0.01%	科幻与讨论社区
0.01%	在线文档与资源（德语）
0.01%	基督教科学箴言报（国际新闻与评论）
0.01%	旅行指南与旅游资源
0.01%	可持续生活与农业
0.01%	Arduino
0.01%	同人小说创作与分享社区
0.01%	排行榜与用户投票资源
0.01%	教育与学习资源
0.01%	无政府主义与理论资源
0.01%	综合新闻门户
0.01%	家谱与历史研究
0.01%	关系与生活方式网站
0.01%	宝可梦对战策略社区
0.01%	天主教新闻与评论
0.01%	流行文化与生活方式
0.01%	安卓技术与新闻
0.01%	轻小说翻译与分享
0.01%	行为与家庭支持社区
0.01%	政治与投票信息资源
0.01%	地区新闻与博客
0.01%	讽刺与幽默论坛
0.01%	漫画与角色数据库
0.01%	保守派政治博客
0.01%	本地新闻与文化评论
0.01%	游戏开发者社区
0.01%	叙事与文化分析
0.01%	左翼新闻与评论
0.01%	《大英百科全书》多媒体资源
0.01%	芝加哥新闻与博客
0.01%	斯坦福哲学百科全书
0.01%	洛杉矶新闻与文化评论
0.01%	我的世界小马同人小说社区
0.01%	学术与文学资源
0.01%	占领华尔街运动网站
0.01%	生物医学研究资源
0.01%	南佛罗里达新闻
0.01%	电视剧新闻与评论
0.01%	棒球新闻与分析
0.01%	支持与心理健康论坛
0.01%	环保与社会博客
0.01%	独立政治评论博客
0.01%	科学与历史杂志
0.01%	美国历史报纸档案
0.01%	电影与娱乐新闻
0.01%	电影评论与博客
0.01%	新闻与评论资源
0.01%	Perl
0.01%	犹太教与文化资源
0.01%	《华尔街日报》在线版
0.01%	德国之声新闻
0.01%	南佛罗里达本地新闻
0.01%	娱乐与讽刺社区
0.01%	《暮光之城》同人小说社区
0.01%	开放存取学术资源
0.01%	经济学博客
0.01%	开发者新闻与资源
0.01%	旅行问答社区
0.01%	科学与数学博客
0.01%	地理信息系统问答社区
0.01%	生活与娱乐新闻
0.01%	自由主义与政策研究
0.01%	哈佛商业评论
0.01%	《大英百科全书》多媒体资源
0.01%	开放民主与新闻评论
0.01%	南非新闻门户
0.01%	健康社区与论坛
0.01%	奇幻文学资源
0.01%	生活与娱乐新闻
0.01%	教程与指南资源
0.01%	家居指南与生活方式
0.01%	音乐问答社区
0.01%	搜索引擎与工具
0.01%	法律与自由博客
0.01%	Steam
0.01%	科学美国人博客
0.01%	Microsoft
0.01%	开放存取学术期刊
0.01%	基督教资源与指南
0.01%	科技与生活方式新闻
0.01%	生活与娱乐资源
0.01%	南加州新闻与评论
0.01%	政治与社会评论
0.01%	电子游戏新闻与评论
0.01%	明尼苏达新闻门户
0.01%	布偶与儿童娱乐资源
0.01%	科技新闻与创业评论
0.01%	自由欧洲电台新闻
0.01%	迪士尼乐园社区与资源
0.01%	综合新闻与评论
0.01%	《华盛顿邮报》直播新闻
0.01%	以色列新闻门户
0.01%	音乐歌词与注释
0.01%	母亲与生活方式资源
0.01%	湾区新闻与评论
0.01%	法律资源与案例数据库
0.01%	创意写作与角色扮演社区
0.01%	英国议会官方文件与出版物
0.01%	父母支持与育儿建议
0.01%	数据库管理问答社区
0.01%	问答与知识共享平台
0.01%	本地新闻与评论（已停运）
0.01%	财经与政治分析博客
0.01%	学习工具与教育资源
0.01%	健康与艾滋病资源
0.01%	投资与市场分析博客
0.01%	政治与社会评论
0.01%	科技与工程新闻
0.01%	英国新闻与娱乐
0.01%	《大英百科全书》多媒体资源
0.01%	时尚与社会文化杂志
0.01%	一级方程式赛车新闻与评论
0.01%	地区新闻与评论（加利福尼亚）
0.01%	政治与文化博客
0.01%	娱乐与流行文化新闻
0.01%	创意写作与故事共享平台
0.01%	小型企业资源与建议
0.01%	学术资源与学习工具
0.01%	社会与政治博客
0.01%	科学新闻与研究
0.01%	技术与教育资源
0.01%	数学资源与求解工具
0.01%	在线百科与知识资源
0.01%	《纽约时报》存档查询
0.01%	自然健康与生活方式
0.01%	LaTeX
0.01%	CNN
0.01%	电子游戏新闻与评论
0.01%	保守主义政策研究所
0.01%	技术与电子设备新闻
0.01%	食谱与烹饪资源
0.01%	哲学与社会评论博客
0.01%	学术辅导与资源
0.01%	爱尔兰新闻门户
0.01%	科幻与奇幻问答社区
0.01%	时尚与手袋社区
0.01%	自行车问答社区
0.01%	学术论文与研究工具
0.01%	奥兰多新闻门户
0.01%	Linux
0.01%	育儿问答社区
0.01%	重金属音乐资源
0.01%	政治与军事评论博客
0.01%	定义与参考资源
0.01%	Scribd
0.01%	保守主义政治博客
0.01%	信仰与生活方式资源
0.01%	政治新闻与分析
0.01%	《星际迷航》百科
0.01%	吉他谱与音乐资源
0.01%	坦帕湾新闻门户
'''
from matplotlib.font_manager import FontProperties

# 设置字体为黑体，以支持中文显示
plt.rcParams['font.sans-serif'] = ['SimHei']  # 适用于Windows系统
plt.rcParams['axes.unicode_minus'] = False  # 正确显示负号
# 数据预处理
lines = data.strip().split('\n')
data_list = []
for line in lines:
    if line.strip() == '':
        continue
    parts = line.strip().split('\t')
    if len(parts) != 2:
        continue
    percent_str, topic = parts
    percent = float(percent_str.strip('%'))
    data_list.append((percent, topic))

# 定义聚类映射，使用英文标签
cluster_mapping = {
    'Science and Medicine': ['科学', '医学', '生物', '研究', '期刊', '心理学', '气候', '数学', '物理学', '生物信息学', '医学研究', '健康', '自闭症', '科学期刊'],
    'News and Media': ['新闻', '媒体', '报纸', '广播', '时事', '博客', '评论', '分析', '记者', '门户', '自由主义', '社会正义', '环保', '民主', '以色列', '华尔街日报', '华盛顿邮报', '德国之声', '自由欧洲电台', 'CNN', '南佛罗里达新闻', '综合新闻'],
    'Literature and Books': ['文学', '小说', '电子书', '文档', '阅读', '写作', '出版', '参考书', '书籍', '百科全书', '斯坦福哲学百科全书', '大英百科全书'],
    'Technology and Program': ['技术', '编程', '软件', 'IT', '计算机', '网络', '开发', 'Linux', 'Unix', 'Perl', 'Ubuntu', 'Apple', 'Windows', 'Microsoft', 'LaTeX', '网络安全', '科技新闻', '电子设备'],
    'Entertainment': ['游戏', '娱乐', '攻略', '动漫', '角色扮演', '电子游戏', '宝可梦', '任天堂', '桌游', '影视', '电影', '电视', '音乐', '体育', '迪士尼'],
    'Finance and Business': ['财经', '商业', '金融', '投资', '市场', '经济', '理财', '创业', '企业', '财经新闻'],
    'Community and Forums': ['社区', '论坛', '问答', '讨论', '分享', '支持', '平台', '社交', '微博客'],
    'Education and Reference': ['教育', '学术', '学习', '参考', '知识', '教程', '资源', '课程', '工具', '教材', '开放教育', '学术资源'],
    'Law, Politics, Religion and Philosophy': ['法律', '政治', '案例', '政策', '司法', '议会', '政府', '国际法', '宗教', '哲学', '基督教', '犹太教', '伊斯兰', '神学', '信仰'],
    'Health and Lifestyle': ['健康', '生活', '美食', '烹饪', '母亲', '育儿', '环保', '体育', '心理', '家庭', '艺术', '文化', '流行', '音乐', '电影', '电视', '戏剧', '摄影', '娱乐', '时尚', '生活方式'],
    # 'Art and Culture': ,
    'Other': []
}

# 将主题分配到聚类
cluster_totals = {}
for percent, topic in data_list:
    assigned = False
    for cluster, keywords in cluster_mapping.items():
        for keyword in keywords:
            if keyword in topic:
                cluster_totals[cluster] = cluster_totals.get(cluster, 0) + percent
                assigned = True
                break
        if assigned:
            break
    if not assigned:
        cluster_totals['Others'] = cluster_totals.get('Others', 0) + percent

labels = cluster_totals.keys()
sizes = cluster_totals.values()
# 设置图形大小
plt.figure(figsize=(12, 8),dpi=300)

# 绘制饼图
wedges, texts, autotexts = plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=140, textprops={'fontsize': 12})

# 增大自动文本（百分比）的字体大小
plt.setp(autotexts, size=10, )

# 增大标签的字体大小
plt.setp(texts, size=20)

# 设置图例及其位置和字体大小
# plt.legend(wedges, labels, title="Clusters", loc="center left", bbox_to_anchor=(1, 0, 0.5, 1), fontsize=10)

plt.axis('equal')  # 确保饼图是圆形

# 添加标题
# plt.title('Cluster Proportions in Topics', fontsize=14)

# 显示图表
plt.show()
